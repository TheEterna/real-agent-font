// 极客模式终端动画效果
// 启动动画、打字效果、流光效果等

// 终端启动动画
.terminal-boot-sequence {
  opacity: 0;
  animation: boot-sequence 3s ease-out forwards;

  .boot-text {
    font-family: 'Courier New', monospace;
    color: var(--terminal-fg);
    line-height: 1.2;
    white-space: pre;
    overflow: hidden;
  }

  .boot-line {
    opacity: 0;
    animation: boot-line-appear 0.5s ease-out forwards;

    &:nth-child(1) { animation-delay: 0.2s; }
    &:nth-child(2) { animation-delay: 0.4s; }
    &:nth-child(3) { animation-delay: 0.6s; }
    &:nth-child(4) { animation-delay: 0.8s; }
    &:nth-child(5) { animation-delay: 1.0s; }
    &:nth-child(6) { animation-delay: 1.2s; }
    &:nth-child(7) { animation-delay: 1.4s; }
    &:nth-child(8) { animation-delay: 1.6s; }
  }

  .boot-progress {
    width: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--terminal-fg), transparent);
    animation: boot-progress 2s ease-out 1.5s forwards;
  }
}

@keyframes boot-sequence {
  0% {
    opacity: 0;
    transform: scale(0.9);
    filter: brightness(0) blur(5px);
  }
  50% {
    opacity: 0.7;
    filter: brightness(0.5) blur(2px);
  }
  100% {
    opacity: 1;
    transform: scale(1);
    filter: brightness(1) blur(0);
  }
}

@keyframes boot-line-appear {
  0% {
    opacity: 0;
    transform: translateX(-20px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes boot-progress {
  0% { width: 0; }
  100% { width: 100%; }
}

// 打字机效果
.typewriter-effect {
  overflow: hidden;
  border-right: 2px solid var(--terminal-cursor);
  animation: typewriter-cursor 1s infinite;

  &.typing {
    animation: typewriter-cursor 0.5s infinite;
  }
}

@keyframes typewriter-cursor {
  0%, 50% { border-color: var(--terminal-cursor); }
  51%, 100% { border-color: transparent; }
}

// 流光效果
.terminal-stream-effect {
  position: relative;
  overflow: hidden;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.1) 50%,
      transparent 100%
    );
    animation: stream-flow 3s infinite ease-in-out;
    pointer-events: none;
    z-index: 1;
  }
}

@keyframes stream-flow {
  0% { left: -100%; }
  100% { left: 100%; }
}

// 文字抖动效果
.text-glitch {
  animation: text-glitch 0.3s infinite;

  &::before,
  &::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--terminal-bg);
  }

  &::before {
    animation: glitch-1 0.5s infinite;
    color: #ff0000;
    z-index: 1;
  }

  &::after {
    animation: glitch-2 0.5s infinite;
    color: #00ffff;
    z-index: 2;
  }
}

@keyframes text-glitch {
  0%, 100% { transform: translate(0); }
  20% { transform: translate(-1px, 1px); }
  40% { transform: translate(-1px, -1px); }
  60% { transform: translate(1px, 1px); }
  80% { transform: translate(1px, -1px); }
}

@keyframes glitch-1 {
  0%, 100% { transform: translate(0); opacity: 1; }
  10% { transform: translate(-1px, -1px); opacity: 0.8; }
  20% { transform: translate(-2px, 2px); opacity: 0.6; }
  30% { transform: translate(1px, -1px); opacity: 0.8; }
  40% { transform: translate(-1px, 2px); opacity: 0.7; }
  50% { transform: translate(-2px, -2px); opacity: 0.5; }
  60% { transform: translate(2px, 1px); opacity: 0.8; }
  70% { transform: translate(-1px, -2px); opacity: 0.6; }
  80% { transform: translate(-2px, 1px); opacity: 0.7; }
  90% { transform: translate(2px, -1px); opacity: 0.8; }
}

@keyframes glitch-2 {
  0%, 100% { transform: translate(0); opacity: 1; }
  15% { transform: translate(1px, 1px); opacity: 0.7; }
  25% { transform: translate(2px, -1px); opacity: 0.5; }
  35% { transform: translate(-1px, 1px); opacity: 0.8; }
  45% { transform: translate(1px, -2px); opacity: 0.6; }
  55% { transform: translate(2px, 2px); opacity: 0.4; }
  65% { transform: translate(-2px, -1px); opacity: 0.7; }
  75% { transform: translate(1px, 2px); opacity: 0.5; }
  85% { transform: translate(2px, -2px); opacity: 0.8; }
  95% { transform: translate(-2px, 1px); opacity: 0.6; }
}

// 脉冲效果
.pulse-effect {
  animation: pulse 2s infinite ease-in-out;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

// 呼吸灯效果
.breathing-light {
  animation: breathing 3s infinite ease-in-out;
}

@keyframes breathing {
  0%, 100% {
    box-shadow: 0 0 5px var(--effect-glow-color);
  }
  50% {
    box-shadow:
      0 0 10px var(--effect-glow-color),
      0 0 20px var(--effect-glow-color),
      0 0 30px var(--effect-glow-color);
  }
}

// 数据流效果
.data-stream {
  position: relative;

  &::before {
    content: '01001001 01001111 01010100';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    font-family: 'Courier New', monospace;
    font-size: 8px;
    color: rgba(0, 255, 0, 0.1);
    overflow: hidden;
    animation: data-flow 5s infinite linear;
    pointer-events: none;
    z-index: 0;
  }
}

@keyframes data-flow {
  0% { transform: translateY(-100%); }
  100% { transform: translateY(100%); }
}

// 连接动画
.connection-animation {
  position: relative;

  &::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    width: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--terminal-fg), transparent);
    animation: connection-establish 2s ease-out forwards;
  }
}

@keyframes connection-establish {
  0% { width: 0; left: 0; }
  50% { width: 50%; left: 25%; }
  100% { width: 100%; left: 0; }
}

// 错误闪烁效果
.error-flash {
  animation: error-flash 0.5s ease-in-out 3;
}

@keyframes error-flash {
  0%, 100% { background-color: transparent; }
  50% { background-color: rgba(255, 0, 0, 0.2); }
}

// 成功提示动画
.success-glow {
  animation: success-glow 1s ease-out;
}

@keyframes success-glow {
  0% {
    box-shadow: 0 0 5px rgba(0, 255, 0, 0.5);
  }
  50% {
    box-shadow:
      0 0 10px rgba(0, 255, 0, 0.8),
      0 0 20px rgba(0, 255, 0, 0.6),
      0 0 30px rgba(0, 255, 0, 0.4);
  }
  100% {
    box-shadow: 0 0 5px rgba(0, 255, 0, 0.5);
  }
}

// 加载动画
.loading-dots {
  &::after {
    content: '';
    animation: loading-dots 1.5s infinite;
  }
}

@keyframes loading-dots {
  0%, 20% { content: '.'; }
  40% { content: '..'; }
  60% { content: '...'; }
  80%, 100% { content: ''; }
}

// 响应式动画调整
@media (max-width: 768px) {
  .terminal-boot-sequence {
    .boot-text {
      font-size: 12px;
    }
  }
}

// 减少动画模式
@media (prefers-reduced-motion: reduce) {
  .terminal-boot-sequence,
  .typewriter-effect,
  .terminal-stream-effect,
  .text-glitch,
  .pulse-effect,
  .breathing-light,
  .data-stream,
  .connection-animation {
    animation: none;
  }

  .terminal-boot-sequence {
    opacity: 1;
    transform: none;
    filter: none;

    .boot-line {
      opacity: 1;
      transform: none;
      animation: none;
    }
  }
}