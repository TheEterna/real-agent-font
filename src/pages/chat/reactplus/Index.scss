
@use '@/styles/variables.scss' as *;

/* $$$$$$$$$$$$$ CSSVARIABLES - Design Tokens $$$$$$$$$$$$$ */
/* ğŸ¨ é’èŠ±ç“·é…è‰²ç³»ç»Ÿ - Celadon Color System */
/* èƒŒæ™¯ - ç´ é›…ç“·ç™½ */
$bg-primary: #F8F9FA; /* ç“·å™¨åº•è‰² - ç´ é›…ç±³ç™½ */
$bg-secondary: #FEFEFE; /* ä¸»ä½“ç“·ç™½ - çº¯å‡€å¦‚ç‰ */
$bg-tertiary: #F0F4F4; /* æ·¡é’ç“·é¢ - é’ç™½ç›¸é—´ */
$bg-hover: #E8F0F0; /* æ‚¬æµ®æ€ - é’å½±æµ®åŠ¨ */

/* æ–‡å­— - å¢¨è‰²ç³»ç»Ÿ */
$text-primary: #2C3E3E; /* ä¸»å¢¨è‰² - æ·±é‚ƒå†…æ•› */
$text-secondary: #5B7373; /* æ¬¡å¢¨è‰² - å…¸é›…æ²‰ç¨³ */
$text-tertiary: #8B9D9D; /* æ·¡å¢¨è‰² - æ°´å¢¨æ™•æŸ“ */
$text-inverse: #FFFFFF; /* åç™½è‰² */

/* è¾¹æ¡† - é’ç“·è½®å»“ */
$border-subtle: #E0E8E8; /* å¾®å¦™é’è¾¹ */
$border-light: #C8D8D8; /* æ·¡é’è¾¹æ¡† */
$border-medium: #A0B8B8; /* ä¸­é’è¾¹æ¡† */

/* å“ç‰Œè‰² - é’é¾™ä¹‹è‰² */
$brand-primary: #5B8A8A; /* ä¸»é’ç“·è‰² - é’é¾™æœ¬è‰² */
$brand-hover: #3A5F5F; /* æ‚¬æµ®æ·±é’ - é¾™å¨æ˜¾ç° */
$brand-light: #D8E8E8; /* æ·¡é’å…‰æ™• - é¾™æ¯æ‰©æ•£ */
$brand-glow: rgba(91, 138, 138, 0.2); /* é’å…‰æ™•æŸ“ */

/* è¾…åŠ©è‰² - æ°´å¢¨ç‚¹ç¼€ */
$accent-jade: #6B9A98; /* ç¿ ç‰é’ */
$accent-jade-light: #E0F0F0;
$accent-ink: #4A6868; /* å¢¨é’è‰² */
$accent-ink-light: #D0E0E0;

/* çŠ¶æ€è‰² - ä¸œæ–¹æ„å¢ƒ */
$success: #52A885; /* ç¿ ç«¹ç»¿ */
$success-light: #D8F0E8;
$warning: #D0A048; /* ç§‹å¶é‡‘ */
$warning-light: #F8F0D8;
$error: #C85A5A; /* æœ±ç ‚çº¢ */
$error-light: #F8E0E0;
$info: #5B8A8A; /* é’ç“·ä¿¡æ¯è‰² */
$info-light: #D8E8E8;

/* é—´è· */
$space-xs: 0.25rem;
$space-sm: 0.5rem;
$space-2sm: 0.5rem;
$space-md: 1rem;
$space-lg: 1.5rem;
$space-xl: 2rem;
$space-2xl: 3rem;
$space-3xl: 4rem;
$space-4xl: 5rem;
$space-5xl: 6rem;

/* å­—ä½“ */
$font-size-xs: 0.75rem;
$font-size-sm: 0.875rem;
$font-size-base: 1rem;
$font-size-lg: 1.125rem;
$font-size-xl: 1.25rem;
$line-height-tight: 1.25;
$line-height-normal: 1.5;
$line-height-relaxed: 1.75;

/* åœ†è§’ - ç“·å™¨åœ†æ¶¦ */
$radius-sm: 0.375rem;
$radius-md: 0.625rem;
$radius-lg: 0.875rem;
$radius-xl: 1.125rem;
$radius-full: 9999px;

/* é˜´å½± - é’ç“·è´¨æ„Ÿ */
$shadow-subtle: 0 1px 3px rgba(91, 138, 138, 0.06), 0 1px 2px rgba(91, 138, 138, 0.03);
$shadow-soft: 0 2px 8px rgba(91, 138, 138, 0.08), 0 2px 4px rgba(91, 138, 138, 0.04);
$shadow-medium: 0 4px 16px rgba(91, 138, 138, 0.12), 0 2px 6px rgba(91, 138, 138, 0.06);
$shadow-large: 0 8px 32px rgba(91, 138, 138, 0.16), 0 4px 12px rgba(91, 138, 138, 0.08);
$shadow-glow: 0 0 24px var($brand-glow);

/* è¿‡æ¸¡ - å¦‚æ°´æµäº‘è½¬ */
$transition-fast: 180ms cubic-bezier(0.4, 0, 0.2, 1);
$transition-normal: 300ms cubic-bezier(0.4, 0, 0.2, 1);
$transition-slow: 500ms cubic-bezier(0.4, 0, 0.2, 1);
$transition-spring: 600ms cubic-bezier(0.34, 1.56, 0.64, 1); /* å¼¹ç°§æ•ˆæœ - é¾™è…¾ä¹‹æ€ */

/* $$$$$$$$$$ MessageItem é’èŠ±ç“·ä¸»é¢˜å˜é‡ $$$$$$$$$$ */

/* åŸºç¡€æ¶ˆæ¯æ ·å¼ */
$message-spacing: 1.2rem;
$message-padding: 1.25rem;
$message-radius: 0.875rem;
$message-bg: #FEFEFE; /* ç“·ç™½èƒŒæ™¯ */
$message-shadow: rgba(91, 138, 138, 0.08);
$message-text: #2C3E3E; /* ä¸»å¢¨è‰² */
$message-border-width: 3px;

/* æ¶ˆæ¯å¤´éƒ¨ */
$message-header-text: #5B7373; /* æ¬¡å¢¨è‰² */
$message-sender-text: #3A5F5F; /* æ·±é’è‰² */

/* ç”¨æˆ·æ¶ˆæ¯ - æ·¡é’ç“· */
$message-user-bg: #F8FCFC;
$message-user-border: #C8D8D8;
$message-user-text: #5B8A8A;

/* Thinking æ¶ˆæ¯ - ç¥ç€é’ */
$message-thinking-bg: #F8F8F0;
$message-thinking-border: #D0A048; /* ç§‹å¶é‡‘ */
$message-thinking-text: #8B7536;

/* Action æ¶ˆæ¯ - ç¿ ç«¹é’ */
$message-action-bg: #F0F8F4;
$message-action-border: #52A885; /* ç¿ ç«¹ç»¿ */
$message-action-text: #3A7860;

/* Observing æ¶ˆæ¯ - ç´«ç ‚é’ */
$message-observing-bg: #F4F0F8;
$message-observing-border: #8B7BA8;
$message-observing-text: #5B4B78;

/* Tool æ¶ˆæ¯ - æ¹–æ°´é’ */
$message-tool-bg: #F0F8FC;
$message-tool-border: #6B9AB8;
$message-tool-text: #4A6878;

/* Error æ¶ˆæ¯ - æœ±ç ‚çº¢ */
$message-error-bg: #FCF0F0;
$message-error-border: #C85A5A;
$message-error-text: #A03838;

/* Progress æ¶ˆæ¯ - èœœèœ¡é»„ */
$message-progress-bg: #FCF8F0;
$message-progress-border: #D8B870;
$message-progress-text: #A08850;

/* Warning æ¶ˆæ¯ - ç¥ç€é»„ */
$message-warning-bg: #FCF4E8;
$message-warning-border: #D0A048;
$message-warning-text: #A08038;

/* $$$$$$$$$$$$$ ğŸ–¥ï¸ æå®¢æ¨¡å¼ç»ˆç«¯ç•Œé¢æ ·å¼ $$$$$$$$$$$$$ */
.geek-mode-wrapper {
 width: 100%;
 height: 100vh;
 display: flex;
 flex-direction: column;
 background: #000000;
}

/* æå®¢æ¨¡å¼å¿«é€Ÿåˆ‡æ¢å¤´éƒ¨ */
.geek-mode-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 20px;
  background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0f0f0f 100%);
  border-bottom: 1px solid rgba(0, 255, 0, 0.3);
  color: #00ff00;
  font-family: 'Courier New', monospace;
  font-size: 14px;
  min-height: 40px;
  z-index: 100;

  .mode-info {
    display: flex;
    align-items: center;
    gap: 16px;

    .mode-label {
      font-weight: bold;
      text-shadow: 0 0 8px rgba(0, 255, 0, 0.6);
      letter-spacing: 1px;
    }

    .session-info {
      color: rgba(0, 255, 0, 0.7);
      font-size: 12px;
      opacity: 0.8;
    }
  }

  .mode-actions {
    .exit-geek-btn {
      background: transparent;
      border: 1px solid rgba(0, 255, 0, 0.4);
      color: #00ff00;
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      font-family: 'Courier New', monospace;
      font-weight: bold;
      transition: all 0.3s ease;
      letter-spacing: 0.5px;

      &:hover {
        background: rgba(0, 255, 0, 0.1);
        border-color: rgba(0, 255, 0, 0.8);
        box-shadow: 0 0 12px rgba(0, 255, 0, 0.4);
        text-shadow: 0 0 8px rgba(0, 255, 0, 0.8);
        transform: translateY(-1px);
      }

      &:active {
        transform: translateY(0);
        box-shadow: 0 0 8px rgba(0, 255, 0, 0.6);
      }
    }
  }
}

.geek-terminal-interface {
  flex: 1;
  position: relative;

  /* ç¡®ä¿ç»ˆç«¯å æ®å‰©ä½™ç©ºé—´ */
  :deep(.terminal-container) {
    height: 100%;
    border-radius: 0;

    /* å¼ºåŒ–æå®¢æ¨¡å¼çš„è§†è§‰æ•ˆæœ */
    &.terminal-geek-mode {
      border: 2px solid rgba(0, 255, 0, 0.4);
      box-shadow: 0 0 30px rgba(0, 255, 0, 0.15),
      inset 0 0 30px rgba(0, 255, 0, 0.08);

      /* å¢å¼ºçŸ©é˜µèƒŒæ™¯æ•ˆæœ */
      &::before {
        background: radial-gradient(circle at 20% 80%, rgba(0, 255, 0, 0.04) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(0, 255, 0, 0.02) 0%, transparent 50%),
        radial-gradient(circle at 50% 50%, rgba(0, 255, 0, 0.01) 0%, transparent 70%);
      }
    }
  }

  /* ç»ˆç«¯å¤´éƒ¨å¢å¼º */
  :deep(.terminal-header) {
    background: linear-gradient(135deg, #0a1a0a 0%, #1a2f1a 50%, #0f1f0f 100%);
    border-bottom: 2px solid rgba(0, 255, 0, 0.4);
    padding: 12px 20px;

    .terminal-title {
      .title-text {
        font-size: 16px;
        font-weight: bold;
        text-shadow: 0 0 12px rgba(0, 255, 0, 0.7);
      }
    }

    .status-indicator {
      .status-text {
        font-size: 14px;
        font-weight: bold;
        letter-spacing: 2px;
      }
    }
  }
}



/* $$$$$$$$$$$$$ TOP STATUS BAR $$$$$$$$$$$$$ */
.react-plus-app {
  position: relative;
  color: $text-primary;
  display: flex;
  flex-direction: column;
  transition: background-color $transition-normal;

  overflow: auto;
  .top-status-bar {
    position: sticky;
    top: 0;
    z-index: 50;
    background: rgba(0, 0, 0, 0);
    padding-top: $space-md;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: all $transition-normal;
  }

  /* é’èŠ±ç“·çº¹ç†å åŠ  */
  &::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: radial-gradient(circle at 20% 30%, rgba(91, 138, 138, 0.03) 0%, transparent 50%),
    radial-gradient(circle at 80% 70%, rgba(91, 138, 138, 0.03) 0%, transparent 50%);
    pointer-events: none;
    z-index: 0;
  }

  .main-content {
    position: relative;
    z-index: 1;
    flex: 1;
    display: flex;
    flex-direction: column;
    max-width: 100%;
    margin: 0 auto;
    width: 100%;
  }



  .agent-label {
    font-size: $font-size-sm;
    font-weight: 600;
    color: $text-secondary;
    letter-spacing: 0.5px;
    text-transform: uppercase;
  }


  .action-btn {
    position: relative;
    color: $text-secondary !important;
    transition: all $transition-normal !important;
    border-radius: $radius-sm !important;
    overflow: hidden;

    &::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg, transparent 30%, $brand-glow 50%, transparent 70%);
      background-size: 200% 100%;
      opacity: 0;
      transition: opacity $transition-fast;
    }

    &:hover {
      color: $brand-primary !important;
      background: $bg-hover !important;
      transform: translateY(-1px);
      box-shadow: $shadow-subtle;

      &::before {
        animation: shimmer 1.5s ease-in-out infinite;
        opacity: 1;
      }
    }

    &:active {
      transform: translateY(0) scale(0.98);
      transition: all 100ms cubic-bezier(0.4, 0, 0.2, 1);
    }
  }

  .global-progress {
    padding: $space-md $space-xl;
    background: $bg-secondary;
    border-bottom: 1px solid $border-subtle;
    animation: slideDown $transition-normal;
  }

  .progress-content {
    max-width: 800px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    gap: $space-md;
  }

  .progress-icon {
    position: relative;
  }

  .progress-indicator {
    position: relative;
    width: 24px;
    height: 24px;
  }

  .pulse-ring {
    position: absolute;
    inset: -8px;
    border: 2px solid $brand-primary;
    border-radius: 50%;
    opacity: 0.8;
    box-shadow: 0 0 12px $brand-glow;
  }

  .pulse-dot {
    position: absolute;
    inset: -10px;
    z-index: 99;
    background: $brand-primary;
    border-radius: 50%;
    box-shadow: 0 0 16px $brand-primary,
    0 0 32px $brand-glow;
  }

  .progress-text {
    font-size: $font-size-sm;
    color: $text-secondary;
    font-weight: 500;
  }
}

/* $$$$$$$$$$$$$ CHAT CONTAINER $$$$$$$$$$$$$ */
.react-plus-app {
  .chat-container {
    position: relative;
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    padding: $space-2xl $space-lg;

    @include pretty-scrollbar();
    /* åŠé€æ˜é’ç“·èƒŒæ™¯ */
    backdrop-filter: blur(20px);

    /* Custom scrollbar - é’ç“·è‰² */
    //scrollbar-width: thin;
    //scrollbar-color: $brand-primary transparent;
    //
    //&::-webkit-scrollbar {
    //  width: 8px;
    //}
    //
    //&::-webkit-scrollbar-track {
    //  background: transparent;
    //}
    //
    //&::-webkit-scrollbar-thumb {
    //  background: linear-gradient(180deg,
    //          $brand-primary,
    //          $brand-hover
    //  );
    //  border-radius: $radius-full;
    //  transition: all $transition-fast;
    //  box-shadow: 0 0 6px $brand-glow;
    //
    //  &:hover {
    //    background: $brand-hover;
    //    box-shadow: 0 0 12px $brand-glow;
    //  }
    //}
  }

  .message-wrapper {
    width: 790px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
  }


  .message-item {
    transition: all $transition-normal;
  }
}

/* $$$$$$$$$$$$$ ğŸ¨ MESSAGE é’èŠ±ç“·å¢å¼ºæ ·å¼ $$$$$$$$$$$$$ */
.react-plus-app {
  /* ä¸ºæ‰€æœ‰æ¶ˆæ¯æ·»åŠ é’ç“·è´¨æ„Ÿ */
  :deep(.message) {
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(8px);
    transition: all $transition-normal;

    /* é’ç“·é‡‰å…‰æ•ˆæœ */
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 50%;
      height: 100%;
      background: linear-gradient(90deg,
              transparent,
              rgba(91, 138, 138, 0.08),
              transparent
      );
      transition: left $transition-slow;
      pointer-events: none;
    }

    &:hover::before {
      left: 100%;
    }

    /* ä¸åŒç±»å‹æ¶ˆæ¯çš„é’é¾™å…‰æ™• */
    &.thinking:hover {
      box-shadow: 0 4px 16px rgba(208, 160, 72, 0.2),
      0 2px 8px rgba(208, 160, 72, 0.1);
    }

    &.action:hover {
      box-shadow: 0 4px 16px rgba(82, 168, 133, 0.2),
      0 2px 8px rgba(82, 168, 133, 0.1);
    }

    &.observing:hover {
      box-shadow: 0 4px 16px rgba(139, 123, 168, 0.2),
      0 2px 8px rgba(139, 123, 168, 0.1);
    }

    &.tool:hover {
      box-shadow: 0 4px 16px rgba(107, 154, 184, 0.2),
      0 2px 8px rgba(107, 154, 184, 0.1);
    }

    &.error:hover {
      box-shadow: 0 4px 16px rgba(200, 90, 90, 0.2),
      0 2px 8px rgba(200, 90, 90, 0.1);
    }

    &.user:hover {
      box-shadow: 0 4px 16px rgba(91, 138, 138, 0.15),
      0 2px 8px rgba(91, 138, 138, 0.08);
    }

    /* å‘é€è€…åç§°ä¸‹åˆ’çº¿åŠ¨æ•ˆ */
    &:hover .sender::after {
      width: 100%;
    }
  }


  :deep(.sender) {
    position: relative;
    display: inline-block;

    &::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 0;
      height: 2px;
      background: $brand-primary;
      transition: width $transition-normal;
    }
  }
}

/* $$$$$$$$$$$$$ LOADING INDICATOR $$$$$$$$$$$$$ */
.react-plus-app {
  .loading-indicator {
    display: flex;
    align-items: center;
    gap: $space-md;
    padding: $space-lg;
    animation: dragonRise $transition-slow;
  }

  .loading-dots {
    display: flex;
    gap: $space-sm;
    position: relative;
  }

  /* é’èŠ±ç“·åŠ è½½ç‚¹ */
  .loading-dots span {
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: $brand-primary;
    box-shadow: 0 0 8px $brand-glow;
  }

  .loading-dots span::after {
    content: '';
    position: absolute;
    inset: -4px;
    border-radius: 50%;
    border: 2px solid $brand-primary;
    opacity: 0;
    animation: dragonDotRing 1.6s ease-in-out infinite;
  }

  .loading-dots span:nth-child(1) {
    animation-delay: 0s;
  }

  .loading-dots span:nth-child(1)::after {
    animation-delay: 0s;
  }

  .loading-dots span:nth-child(2) {
    animation-delay: 0.2s;
  }

  .loading-dots span:nth-child(2)::after {
    animation-delay: 0.2s;
  }

  .loading-dots span:nth-child(3) {
    animation-delay: 0.4s;
  }

  .loading-dots span:nth-child(3)::after {
    animation-delay: 0.4s;
  }

  .loading-text {
    font-size: $font-size-sm;
    color: $text-secondary;
    font-weight: 500;
    background: linear-gradient(90deg,
            $text-secondary,
            $brand-primary,
            $text-secondary
    );
    background-size: 200% 100%;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: shimmer 2s ease-in-out infinite;
  }

  /* $$$$$$$$$$$$$ SCROLL TO BOTTOM BUTTON $$$$$$$$$$$$$ */
  .scroll-to-bottom {
    position: fixed;
    bottom: 300px;
    right: $space-xl;
    z-index: 400;
    animation: dragonRise $transition-slow cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .scroll-to-bottom button {
    position: relative;
    border: 2px solid $border-light !important;
    box-shadow: $shadow-medium !important;
    transition: all $transition-spring !important;
    background: #b8ddd9;
  }

  /* é’é¾™å…‰ç¯ */
  .scroll-to-bottom button::before {
    content: '';
    position: absolute;
    inset: -4px;
    border-radius: 50%;
    background: conic-gradient(
                    from 0deg,
                    $brand-primary,
                    $accent-jade,
                    $brand-primary
    );
    opacity: 0;
    animation: spinRipple 3s linear infinite;
    transition: opacity $transition-normal;
  }

  .scroll-to-bottom button:hover {
    background: $brand-primary !important;
    border-color: $brand-primary !important;
    transform: translateY(-4px) scale(1.1) !important;
    box-shadow: $shadow-large, $shadow-glow !important;
  }

  .scroll-to-bottom button:hover::before {
    opacity: 0.6;
  }

  .scroll-to-bottom button:active {
    transform: translateY(-2px) scale(1.05) !important;
    transition: all 100ms !important;
  }

  /* Vue Transition åŠ¨æ•ˆå¢å¼º */
  .fade-enter-active {
    animation: dragonRise $transition-slow cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .fade-leave-active {
    transition: all $transition-normal;
  }

  .fade-enter-from,
  .fade-leave-to {
    opacity: 0;
    transform: translateY(20px) scale(0.9);
  }

  /* $$$$$$$$$$$$$ INPUT AREA - æ±‰ç™½ç‰é¾™æ³‰é’ç“·è¾“å…¥åŒºåŸŸ $$$$$$$$$$$$$ */
  .input-container {

    border-radius: var(--radius-2xl, 1.5rem);
    backdrop-filter: blur(24px) saturate(1.3) contrast(1.1);

    /* é¾™æ³‰é’ç“·ä¸Šç¼˜å…‰æ™•ï¼ˆæ¨¡æ‹Ÿ border-imageï¼‰+ æ±‰ç™½ç‰æ·±å±‚è´¨æ„Ÿé˜´å½± */
    box-shadow: /* é¡¶éƒ¨é’ç“·å…‰æ™•ï¼ˆæ¨¡æ‹Ÿæ¸å˜è¾¹æ¡†ï¼‰ */
            0 -1px 0 0 $primary-color-100,
            0 -3px 4px 1px rgba($primary-color-75, 0.7),
              /* æ·±å±‚é˜´å½± */
            0 -12px 48px rgba(91, 138, 138, 0.06),
            0 -8px 32px rgba(91, 138, 138, 0.08),
            0 -4px 16px rgba(255, 255, 255, 0.5),
            0 -2px 8px rgba(255, 255, 255, 0.3),
              /* å†…éƒ¨é«˜å…‰ */
            inset 0 2px 0 rgba(255, 255, 255, 0.9),
            inset 0 1px 0 rgba(255, 255, 255, 0.7),
            inset 0 -1px 0 rgba(107, 154, 152, 0.08),
            inset 0 -2px 0 rgba(107, 154, 152, 0.02);

  }


  /* $$$$$$$$$$$$$ ATTACHMENTS PREVIEW - æ±‰ç™½ç‰é›•ç¢ $$$$$$$$$$$$$ */
  .attachments-preview {
    max-width: 800px;
    margin: 0 auto $space-lg;
    display: flex;
    flex-wrap: wrap;
    gap: $space-md;
    padding: $space-md;

    /* æ±‰ç™½ç‰åº•åº§ */
    background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.9) 0%,
            rgba(250, 254, 254, 0.95) 50%,
            rgba(255, 255, 255, 0.9) 100%
    );
    border-radius: $radius-xl;
    border: 1px solid rgba(107, 154, 152, 0.15);
    backdrop-filter: blur(12px);

    /* é¾™æ³‰é’ç“·å…‰æ™• */
    box-shadow: 0 4px 16px rgba(91, 138, 138, 0.06),
    0 2px 8px rgba(255, 255, 255, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.6);

    transition: all $transition-spring;

    /* ç‰çŸ³çº¹ç† */
    &::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: inherit;

      pointer-events: none;
      z-index: -1;
    }

    &:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(91, 138, 138, 0.12),
      0 4px 12px rgba(255, 255, 255, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.8),
      0 0 24px rgba(107, 154, 152, 0.1);
    }
  }

  .attachment-chip {
    position: relative;
    display: inline-flex;
    align-items: center;
    gap: $space-sm;
    padding: $space-md $space-lg;

    /* æ±‰ç™½ç‰åˆ‡ç‰‡è´¨æ„Ÿ */
    background: linear-gradient(145deg,
            rgba(255, 255, 255, 0.95) 0%,
            rgba(248, 254, 254, 0.9) 30%,
            rgba(250, 252, 252, 0.95) 70%,
            rgba(255, 255, 255, 0.9) 100%
    );

    /* ä½¿ç”¨ border + box-shadow æ›¿ä»£ border-imageï¼ˆå…¼å®¹åœ†è§’ï¼‰ */
    border: 1px solid rgba(107, 154, 152, 0.2);
    border-radius: $radius-lg;
    font-size: $font-size-sm;
    transition: all $transition-spring;
    overflow: hidden;

    /* é¾™æ³‰é’ç“·è¾¹æ¡†å…‰æ™•ï¼ˆæ¨¡æ‹Ÿ border-imageï¼‰+ ç‰çŸ³å†…å…‰ */
    box-shadow: /* æ¸å˜è¾¹æ¡†æ•ˆæœ */
            0 0 0 1px rgba(91, 138, 138, 0.15),
              /* åŸºç¡€é˜´å½± */
            0 2px 8px rgba(91, 138, 138, 0.08),
            0 1px 4px rgba(255, 255, 255, 0.4),
              /* å†…éƒ¨é«˜å…‰ */
            inset 0 1px 0 rgba(255, 255, 255, 0.7),
            inset 0 -1px 0 rgba(91, 138, 138, 0.05);

    /* é¾™æ³‰é’ç“·é‡‰è´¨æµå…‰ */
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg,
              transparent,
              rgba(107, 154, 152, 0.15),
              rgba(91, 138, 138, 0.1),
              transparent
      );
      transition: left $transition-slow;
      pointer-events: none;
    }

    /* æ±‰ç™½ç‰å¾®å¦™çº¹ç† */
    &::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 1.25em;

      pointer-events: none;
      opacity: 0;
      transition: opacity $transition-normal;
    }

    &:hover {
      transform: translateY(-3px) scale(1.02) rotateY(2deg);
      border-color: $brand-primary;

      /* é¾™æ³‰é’ç“·å…‰åç»½æ”¾ */
      box-shadow: 0 8px 24px rgba(91, 138, 138, 0.15),
      0 4px 12px rgba(255, 255, 255, 0.5),
      inset 0 1px 0 rgba(255, 255, 255, 0.9),
      inset 0 -1px 0 rgba(91, 138, 138, 0.1),
      0 0 32px rgba(107, 154, 152, 0.2);

      &::before {
        left: 100%;
      }

      &::after {
        opacity: 1;
      }
    }

    &:active {
      transform: translateY(-1px) scale(0.98);
      transition: all 120ms cubic-bezier(0.4, 0, 0.2, 1);
    }
  }

  .attachment-icon {
    color: $text-secondary;
    font-size: $font-size-base;
  }

  .attachment-name {
    color: $text-primary;
    font-weight: 500;
    max-width: 150px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .attachment-size {
    color: $text-tertiary;
    font-size: $font-size-xs;
  }

  .remove-btn {
    color: $text-tertiary !important;
    padding: 0 !important;
    min-width: 20px !important;
    height: 20px !important;
    border-radius: 50% !important;
    transition: all $transition-fast !important;
  }

  .remove-btn:hover {
    color: $error !important;
    background: $bg-hover !important;
  }

  /* $$$$$$$$$$$$$ INPUT CONTAINER - æ±‰ç™½ç‰é¾™æ³‰é’ç“·æè‡´èåˆ $$$$$$$$$$$$$ */


  /* $$$$$$$$$$$$$ INPUT TOOLBAR FLOATING - æµ®åŠ¨å·¥å…·æ ï¼ˆç»å¯¹å®šä½äºè¾“å…¥æ¡†å·¦ä¸‹è§’å¤–éƒ¨ï¼‰$$$$$$$$$$$$$ */


  /* $$$$$$$$$$$$$ MODE SELECTOR - æ¨¡å¼é€‰æ‹©å™¨ $$$$$$$$$$$$$ */
  .mode-selector {
    display: flex;
    align-items: center; /* ç¡®ä¿æŒ‰é’®å‚ç›´å¯¹é½ */
    gap: $space-lg; /* å¢åŠ æŒ‰é’®é—´è· */
    z-index: 10;
    position: relative;
    /* æ±‰ç™½ç‰ä¹¦å†™é¢ - æ¸©æ¶¦å¦‚ç‰ */
    background: linear-gradient(145deg,
            rgba(255, 255, 255, 0.98) 0%,
            rgba(250, 254, 254, 0.95) 30%,
            rgba(248, 252, 252, 0.98) 70%,
            rgba(255, 255, 255, 0.98) 100%
    );
    > * {
      pointer-events: auto;
      z-index: 11;
    }

    span {
      white-space: nowrap;
    }
  }

  .input-area {
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: space-between;

    /* æ±‰ç™½ç‰ä¹¦å†™é¢ - æ¸©æ¶¦å¦‚ç‰ */
    background: linear-gradient(145deg,
            rgba(255, 255, 255, 0.98) 0%,
            rgba(250, 254, 254, 0.95) 30%,
            rgba(248, 252, 252, 0.98) 70%,
            rgba(255, 255, 255, 0.98) 100%
    );

    /* è¾¹æ¡†ä¸åœ†è§’ */
    width: 100%;

    /* å¹³æ»‘è¿‡æ¸¡ */
    transition: all $transition-spring;


    /* æ‚¬æµ®æ—¶çš„æ±‰ç™½ç‰æ¸©æ¶¦æ„Ÿ */
    &:hover:not(:focus-within) {
      border-top-color: rgba(107, 154, 152, 0.16);
      background: linear-gradient(145deg,
              rgba(255, 255, 255, 0.99) 0%,
              rgba(250, 254, 254, 0.97) 35%,
              rgba(248, 252, 252, 0.99) 70%,
              rgba(255, 255, 255, 0.99) 100%
      );
    }

    /* $$$$$ Textarea æ ·å¼ $$$$$ */
    textarea {
      width: 100%;
      flex: 1;
      height: 100%;
      min-height: 52px;

      /* ç»§æ‰¿çˆ¶å®¹å™¨èƒŒæ™¯ï¼Œå®ç°è§†è§‰ç»Ÿä¸€ */
      background: transparent;

      /* æ–‡æœ¬æ ·å¼ */
      color: $text-primary !important;
      font-size: $font-size-base !important;
      line-height: $line-height-relaxed !important;
      font-weight: 500 !important;

      /* ç§»é™¤æ‰€æœ‰é»˜è®¤æ ·å¼ï¼Œè®©ç„¦ç‚¹æ•ˆæœå®Œå…¨ç”±çˆ¶å®¹å™¨æ§åˆ¶ */
      border: none !important;
      outline: none !important;
      box-shadow: none !important;
      resize: none !important;

      /* Placeholder æ ·å¼ */
      &::placeholder {
        color: rgba(139, 157, 157, 0.6);
        opacity: 0.8;
        font-weight: 400;
        font-style: italic;
      }
    }

    /* ğŸ¨ ç„¦ç‚¹æ•ˆæœå·²ç”±çˆ¶å®¹å™¨ :focus-within ç»Ÿä¸€æ§åˆ¶ */

    /* $$$$$ Send Button æ ·å¼ $$$$$ */
    .send-button {
      font-weight: 600 !important;
      font-size: $font-size-sm !important;
      overflow: hidden;
      border: none !important;
      outline: none !important;
      /* æ±‰ç™½ç‰é¾™æ³‰é’ç“·æŒ‰é’®ä¸»ä½“ - æ·±åº¦è´¨æ„Ÿ */
      background: linear-gradient(145deg,
              rgba(91, 138, 138, 0.98) 0%,
              rgba(107, 154, 152, 0.95) 15%,
              rgba(91, 138, 138, 1) 30%,
              rgba(107, 154, 152, 0.97) 45%,
              rgba(91, 138, 138, 0.99) 55%,
              rgba(107, 154, 152, 0.96) 70%,
              rgba(91, 138, 138, 0.98) 85%,
              rgba(107, 154, 152, 0.95) 100%
      ) !important;

      color: rgba(255, 255, 255, 0.98) !important;

      /* ä½¿ç”¨ box-shadow æ¨¡æ‹Ÿæ¸å˜è¾¹æ¡†ï¼ˆå…¼å®¹åœ†è§’ï¼‰+ æ±‰ç™½ç‰æŒ‰é’®æ·±å±‚é˜´å½±ç³»ç»Ÿ */
      box-shadow: /* é’ç“·è¾¹ç¼˜å…‰æ™•ï¼ˆæ¨¡æ‹Ÿ border-imageï¼‰ */
              0 0 0 1px rgba(255, 255, 255, 0.3),
              0 0 0 2px rgba(107, 154, 152, 0.4),
                /* æ·±å±‚é˜´å½± */
              0 8px 32px rgba(91, 138, 138, 0.35),
              0 4px 16px rgba(91, 138, 138, 0.25),
              0 2px 8px rgba(255, 255, 255, 0.4),
                /* å†…éƒ¨é«˜å…‰ */
              inset 0 2px 0 rgba(255, 255, 255, 0.4),
              inset 0 1px 0 rgba(255, 255, 255, 0.3),
              inset 0 -1px 0 rgba(58, 95, 95, 0.2),
              inset 0 -2px 0 rgba(58, 95, 95, 0.15) !important;

      transition: all $transition-spring !important;


      /* æ±‰ç™½ç‰å¤–å›´èƒ½é‡ç¯ */
      &::after {
        content: '';
        position: absolute;
        inset: -4px;
        background: conic-gradient(
                        from 0deg,
                        rgba(91, 138, 138, 0.4) 0deg,
                        rgba(107, 154, 152, 0.2) 60deg,
                        rgba(255, 255, 255, 0.3) 120deg,
                        rgba(107, 154, 152, 0.25) 180deg,
                        rgba(91, 138, 138, 0.3) 240deg,
                        rgba(255, 255, 255, 0.2) 300deg,
                        rgba(91, 138, 138, 0.4) 360deg
        );
        z-index: -1;
        opacity: 0;
        transform: scale(0.95);
        transition: all $transition-normal;
        filter: blur(1px);
      }

      &:hover:not(:disabled) {
        transform: translateY(-50%) scale(1.05) !important;

        /* é¾™æ³‰é’ç“·è§‰é†’çŠ¶æ€ */
        background: linear-gradient(145deg,
                rgba(89, 126, 126, 1) 0%,
                rgba(105, 135, 135, 0.98) 15%,
                rgba(89, 126, 126, 1) 30%,
                rgba(105, 135, 135, 0.99) 45%,
                rgba(89, 126, 126, 1) 55%,
                rgba(105, 135, 135, 0.98) 70%,
                rgba(89, 126, 126, 1) 85%,
                rgba(105, 135, 135, 0.98) 100%
        ) !important;

        /* ä½¿ç”¨ box-shadow æ¨¡æ‹Ÿé¾™æ³‰é’ç“·è§‰é†’è¾¹ç¼˜ï¼ˆå…¼å®¹åœ†è§’ï¼‰+ æ±‰ç™½ç‰é¾™æ³‰é’ç“·ç¥éŸµå››å°„ */
        box-shadow: /* é’ç“·è§‰é†’è¾¹ç¼˜å…‰æ™•ï¼ˆæ¨¡æ‹Ÿ border-imageï¼‰ */
                0 0 0 1px rgba(255, 255, 255, 0.5),
                0 0 0 2px rgba(107, 154, 152, 0.6),
                0 0 0 3px rgba(255, 255, 255, 0.3),
                  /* æ·±å±‚é˜´å½±åŠ å¼º */
                0 16px 48px rgba(91, 138, 138, 0.45),
                0 12px 32px rgba(91, 138, 138, 0.35),
                0 8px 24px rgba(91, 138, 138, 0.25),
                0 4px 16px rgba(255, 255, 255, 0.5),
                  /* å†…éƒ¨é«˜å…‰ */
                inset 0 2px 0 rgba(255, 255, 255, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.4),
                inset 0 -1px 0 rgba(58, 95, 95, 0.3),
                inset 0 -2px 0 rgba(58, 95, 95, 0.2),
                  /* é’ç“·å…‰æ™• */
                0 0 48px rgba(107, 154, 152, 0.3),
                0 0 24px rgba(91, 138, 138, 0.4) !important;

      }

      &:active:not(:disabled) {
        transform: translateY(-2px) scale(1.01) !important;
        transition: all 120ms cubic-bezier(0.4, 0, 0.2, 1) !important;

        /* æ±‰ç™½ç‰æŒ‰å‹æ·±åº¦è´¨æ„Ÿ */
        box-shadow: 0 6px 24px rgba(91, 138, 138, 0.3),
        0 3px 12px rgba(91, 138, 138, 0.2),
        inset 0 3px 6px rgba(58, 95, 95, 0.4),
        inset 0 2px 4px rgba(58, 95, 95, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;

        animation: none !important;
      }

      &:disabled {
        background: linear-gradient(145deg,
                rgba(139, 157, 157, 0.4) 0%,
                rgba(155, 175, 175, 0.3) 25%,
                rgba(139, 157, 157, 0.35) 50%,
                rgba(155, 175, 175, 0.3) 75%,
                rgba(139, 157, 157, 0.4) 100%
        ) !important;
        color: rgba(139, 157, 157, 0.7) !important;
        cursor: not-allowed !important;
        transform: none !important;
        animation: none !important;

        /* ä½¿ç”¨ box-shadow æ¨¡æ‹Ÿè¾¹æ¡†ï¼ˆå…¼å®¹åœ†è§’ï¼‰ */
        box-shadow: /* ç°è‰²è¾¹ç¼˜ */
                0 0 0 1px rgba(155, 175, 175, 0.15),
                  /* åŸºç¡€é˜´å½± */
                0 2px 8px rgba(139, 157, 157, 0.15),
                  /* å†…éƒ¨é«˜å…‰ */
                inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
      }
    }

    /* $$$$$ Input Toolbar æ ·å¼ $$$$$ */
    .input-toolbar {
      display: flex;
      align-self: self-start;
      gap: $space-md;
      padding: $space-sm $space-md;

      /* æ±‰ç™½ç‰é›•åˆ»è´¨æ„Ÿ */
      background: linear-gradient(180deg,
              rgba(248, 252, 252, 0.98) 0%,
              rgba(250, 254, 254, 0.95) 50%,
              rgba(255, 255, 255, 0.98) 100%
      );

      border-radius: $space-lg;
      border: 1px solid rgba(107, 154, 152, 0.12);

      box-shadow: /* æ±‰ç™½ç‰å†…å…‰ */
              inset 0 1px 0 rgba(255, 255, 255, 0.8),
              inset 0 -1px 0 rgba(107, 154, 152, 0.05),
                /* å¤–éƒ¨é˜´å½± */
              0 4px 12px rgba(91, 138, 138, 0.08),
              0 2px 6px rgba(0, 0, 0, 0.04);

      transition: all $transition-normal;
      backdrop-filter: blur(8px);

      button {
        position: relative;
        color: $text-secondary !important;
        transition: all $transition-spring !important;
        border-radius: $radius-lg !important;
        overflow: hidden;

        /* æ±‰ç™½ç‰æŒ‰é’®è´¨æ„Ÿ */
        background: linear-gradient(145deg,
                rgba(255, 255, 255, 0.8) 0%,
                rgba(250, 254, 254, 0.7) 50%,
                rgba(255, 255, 255, 0.8) 100%
        ) !important;

        border: 1px solid rgba(107, 154, 152, 0.1) !important;

        box-shadow: 0 2px 6px rgba(91, 138, 138, 0.05),
        0 1px 3px rgba(255, 255, 255, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;

        /* é¾™æ³‰é’ç“·å†…å…‰ */
        &::before {
          content: '';
          position: absolute;
          inset: 0;
          border-radius: inherit;
          background: radial-gradient(circle at center,
                  rgba(107, 154, 152, 0.1) 0%,
                  transparent 60%
          );
          opacity: 0;
          transform: scale(0);
          transition: all $transition-normal;
        }

        /* æ±‰ç™½ç‰å…‰æ™•æ‰©æ•£ */
        &::after {
          content: '';
          position: absolute;
          inset: -2px;
          border-radius: inherit;
          background: linear-gradient(135deg,
                  rgba(255, 255, 255, 0.4),
                  rgba(107, 154, 152, 0.05),
                  rgba(255, 255, 255, 0.4)
          );
          opacity: 0;
          transition: all $transition-normal;
        }

        &:hover {
          color: $brand-primary !important;
          transform: translateY(-2px) scale(1.05) !important;

          /* é¾™æ³‰é’ç“·å…‰åç»½æ”¾ */
          background: linear-gradient(145deg,
                  rgba(255, 255, 255, 0.95) 0%,
                  rgba(248, 254, 254, 0.9) 30%,
                  rgba(250, 252, 252, 0.95) 70%,
                  rgba(255, 255, 255, 0.95) 100%
          ) !important;

          border-color: rgba(91, 138, 138, 0.2) !important;

          box-shadow: 0 6px 18px rgba(91, 138, 138, 0.12),
          0 3px 9px rgba(255, 255, 255, 0.5),
          inset 0 1px 0 rgba(255, 255, 255, 0.8),
          0 0 20px rgba(107, 154, 152, 0.15) !important;

          &::before {
            opacity: 1;
            transform: scale(1);
          }

          &::after {
            opacity: 0.6;
          }
        }

        &:active {
          transform: translateY(-1px) scale(1.02) !important;
          transition: all 100ms cubic-bezier(0.4, 0, 0.2, 1) !important;

          /* æ±‰ç™½ç‰æŒ‰å‹è´¨æ„Ÿ */
          box-shadow: 0 2px 8px rgba(91, 138, 138, 0.08),
          inset 0 2px 4px rgba(91, 138, 138, 0.05),
          inset 0 1px 0 rgba(255, 255, 255, 0.5) !important;
        }
      }
    }
  }

  /* $$$$$$$$$$$$$ RESPONSIVE - å“åº”å¼é€‚é… $$$$$$$$$$$$$ */
  @media (max-width: 768px) {
    .react-plus-app .top-status-bar {
      padding: $space-md $space-lg;
    }

    .react-plus-app .chat-container {
      padding: $space-xl $space-md;
    }

    .react-plus-app .input-container {
      padding: $space-lg $space-md;
    }

    .react-plus-app .scroll-to-bottom {
      right: $space-lg;
      bottom: 180px;
    }

    /* .react-plus-app .right-panel {
    width: 100%;
  } */

    .react-plus-app .quick-actions {
      flex-direction: column;
    }


  }

  @media (max-width: 480px) {
    .react-plus-app .chat-container {
      padding: $space-lg $space-sm;
    }

    .react-plus-app .input-container {
      padding: $space-md;
    }

    .react-plus-app .send-button {
      font-size: $font-size-xs !important;
      right: $space-md;
    }

    .react-plus-app .input-area textarea {
      padding: $space-md 100px $space-md $space-md !important;
    }

    .react-plus-app .mode-btn span {
      display: none;
    }

    .react-plus-app .attachments-preview {
      flex-direction: column;
    }

    .react-plus-app .attachment-chip {
      width: 100%;
    }
  }

  /* $$$$$$$$$$$$$ ACCESSIBILITY $$$$$$$$$$$$$ */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Focus visible for keyboard navigation */
  .react-plus-app *:focus-visible {
    outline: 2px solid $brand-primary;
    outline-offset: 2px;
  }

}
